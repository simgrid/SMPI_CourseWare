
<p class="ui">
<b>
  This CourseWare was tested with <a href="http://simgrid.gforge.inria.fr/">SimGrid</a>
  version 3.27 (small changes <i>may</i> be needed with later versions).
  </b>
</p>

---


<h2> Two options</h2>

You need to have access to the <code>smpicc</code> and <code>smpirun</code> SimGrid executables to go
through the CourseWare.  To get access to these executables you have two options:
<div class="ui list bulleted">
    <div class="ui item"> <b>Easiest Option:</b> Run SimGrid from a Docker container; or</div>
    <div class="ui item"> <b>Not-as-Eaasy Option: </b> Install SimGrid yourself on a Linux machine/VM/Container.</div>
</div>

---

<h3>Easiest Option: Using a Docker container </h3>

Provided you have <a href="https://www.docker.com/">Docker</a> installed on
your system, you can use the <code>henricasanova/ics632_smpi</code> container. You can 
of course run this container and connect to it via a shell, like any Docker container, and do
all your work within the container. Alternately, you cand run the <code>smpicc</code> 
and <code>smpirun</code> in the container but from your host. That is, on your host,
instead of typing <code>smpicc</code> or <code>cmpirun</code> (which would require SimGrid to be
installed on your host), instead you type the commands below.

<h4>On Linux or MacOS</h4>

<div class="ui list bulleted">
    <div class="ui item"> <code>smpicc</code> is executed by running: <code>docker run --rm -it -v $(pwd):/home/smpi --user $(id -u):$(id -g) henricasanova/ics632_smpi smpicc</code></div>
    <div class="ui item"> <code>smpirun</code> is executed by running <code>docker run --rm -it -v $(pwd):/home/smpi --user $(id -u):$(id -g) henricasanova/ics632_smpi smpirun</code></div>
</div>

<div class="ui list bulleted">
    <div class="ui item"> On MacOS: If you get exit code 137 for any of these commands, you may want to increase the memory allocated to Docker (e.g., through the Docker Dashboard preferences).</div>
    </div>

<h4>On Windows</h4>

<div class="ui list bulleted">
    <div class="ui item"> <code>smpicc</code> is executed by running: <code>docker run --rm -it -v %cd%:/home/smpi henricasanova/ics632_smpi smpicc</code></div>
    <div class="ui item"> <code>smprun</code> is executed by running: <code>docker run --rm -it -v %cd%:/home/smpi henricasanova/ics632_smpi smpirun</code></div>
</div>


---

<h3>Not-as-Easy Option: Installing SimGrid by hand</h3>

<p class="ui">
  On a <b>recent Debian/Ubuntu (virtual) machine</b>, you can retrieve SimGrid directly from the
  package manager: 

  <code>sudo apt update && apt upgrade -y</code>
  <code>sudo apt install simgrid</code>

  Do not forget to check that you have installed a sufficiently recent version, e.g., by doing <code>apt-cache show libsimgrid-dev</code>.
  If the version you obtain this way is too old, we recommend you manually install SimGrid following the instructions bellow.
</p>

<p class="ui">
  For instruction regarding manual installation, please refer to the <a href="https://simgrid.org/">The SimGrid page</a>. But just in case, here is
  a typical way to install SimGrid manually on a Linux system:
</p>

<div class="ui list bulleted">
  <div class="ui item">Install the dependencies: <code>sudo apt install -y g++ libboost-all-dev cmake</code></div>
  <div class="ui item">Download the .tar.gz of the latest stable version of SimGrid</div>
  <div class="ui item">Extract the archive: <code>tar -xvf simgrid-x.y.tar.gz</code></div>
  <div class="ui item">Go to the extracted directory: <code>cd simgrid-x.z</code></div>
  <div class="ui item">Generate all makefiles: <code>cmake -DCMAKE_INSTALL_PREFIX=/usr/local -Denable_smpi=on -Denable_documentation=off</code><br> (Assuming you want to install in <code>/usr/local/</code>)</div>
  <div class="ui item">Build: <code>make -j</code></div>
  <div class="ui item">Run the tests (for the paranoid): <code>make check</code></div>
  <div class="ui item">Install libraries and executables: <code>sudo make install</code></div>
</div>

<p class="ui">
  Assuming your path includes <code>/usr/local/bin</code> (which it should), you now can invoke two new
  commands: <b><code>smpicc</code></b> and <b><code>smpirun</code></b>.
</p>

<p class="ui">
  If you are not a superuser on your system, then you have to install SimGrid in your home directory, say in a directory
  called <code>local</code>, with a modified <code>cmake</code>
  invocation, for instance, <code>-DCMAKE_INSTALL_PREFIX=$HOME</code>. The binaries are then available as
  <code>~/bin/smpicc</code> and <code>~/bin/smpirun</code>.
</p>

<div class="ui list">
  <div class="ui item"><code>cmake -DCMAKE_INSTALL_PREFIX=$HOME/local/ -Denable_smpi=on -Denable_documentation=off</code></div>
</div>
